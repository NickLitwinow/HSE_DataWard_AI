# DataWard AI

**DataWard AI** — это комплексная платформа для анализа качества данных, использующая возможности больших языковых моделей (LLM) для предоставления глубоких инсайтов и рекомендаций. Пользователи могут загружать наборы данных в форматах CSV, Parquet или XLSX, после чего система автоматически проводит детальный анализ и генерирует отчет.

## Ключевые возможности

-   **Автоматический анализ данных**: Расчет ключевых метрик качества данных (пропуски, дубликаты, типы данных и т.д.).
-   **AI-сводка**: Генерация резюме с основными проблемами в данных и рекомендациями по их устранению с помощью LLM (Ollama Llama 3).
-   **Оценка качества**: Присвоение числового рейтинга (от 0 до 10) для быстрой оценки общего состояния набора данных.
-   **Интерактивный интерфейс**: Просмотр отчетов, навигация по приложению и загрузка новых файлов через веб-интерфейс.

## Как это работает

1.  **Загрузка данных**: Пользователь переходит на страницу "Add Data Source" и загружает файл с данными (например, `daily_data_sample.parquet`).
2.  **Запуск анализа**: Файл отправляется на бэкенд. Бэкенд выполняет несколько действий:
    -   Использует скрипт для профилирования данных: вычисляет количество строк, столбцов, дубликатов, а также статистику по каждому столбцу (тип данных, пропущенные значения, уникальные значения).
    -   Сохраняет результаты профилирования в базе данных `PostgreSQL`.
    -   Формирует промпт для `Ollama`, передавая ему результаты профилирования.
    -   Получает от `Ollama` текстовую сводку, оценку качества, ключевые проблемы и рекомендации.
    -   Сохраняет AI-сводку в базе данных.
3.  **Просмотр отчета**: Пользователь перенаправляется на главную страницу, где в списке отчетов появляется новый элемент. При нажатии на него открывается страница с детальным отчетом, содержащим как статистический анализ, так и выводы, сгенерированные AI.

## Технологический стек

Проект состоит из нескольких микросервисов, оркестрируемых с помощью `docker-compose`.

| Сервис        | Технология             | Назначение                                                                                                 |
|---------------|------------------------|------------------------------------------------------------------------------------------------------------|
| `frontend`    | Next.js, TypeScript    | Пользовательский интерфейс для загрузки данных и просмотра отчетов.                                        |
| `backend`     | Python (Uvicorn)       | API-сервер для обработки файлов, взаимодействия с БД и LLM.                                                |
| `db`          | PostgreSQL             | Хранение результатов анализа и метаданных отчетов.                                                         |
| `redis`       | Redis                  | Кэширование, управление очередями задач (например, для асинхронного анализа больших файлов).               |
| `ollama`      | Ollama (Llama 3)       | Локально развернутая языковая модель для генерации сводок по качеству данных.                              |
| `ollama-puller`| Docker                 | Вспомогательный сервис для автоматического скачивания модели `llama3` при первом запуске.                 |


## Структура проекта

```
HSE_DataWard_AI/
├── backend/                # Серверная часть (Python)
├── frontend/               # Клиентская часть (Next.js)
│   ├── src/
│   │   ├── app/
│   │   │   ├── data-sources/new/page.tsx   # Страница загрузки нового файла
│   │   │   ├── reports/[id]/page.tsx       # Страница просмотра детального отчета
│   │   │   ├── layout.tsx                  # Основной макет приложения
│   │   │   └── page.tsx                    # Главная страница со списком отчетов
│   │   ├── components/
│   │   │   ├── layout/sidebar.tsx          # Навигационная панель
│   │   │   └── reports-list.tsx            # Компонент списка отчетов
│   │   ├── lib/api.ts                      # Функции для взаимодействия с API
│   │   └── types/analysis-report.ts      # TypeScript-типы для отчетов
│   └── ...
├── cities.csv              # Пример данных
├── daily_data_sample.parquet # Пример данных
└── docker-compose.yml      # Файл для оркестрации всех сервисов
```

## Запуск проекта

Убедитесь, что у вас установлен [Docker](https://www.docker.com/get-started) и [Docker Compose](https://docs.docker.com/compose/install/).

1.  Клонируйте репозиторий:
    ```bash
    git clone https://github.com/NickLitwinow/HSE_DataWard_AI
    cd HSE_DataWard_AI
    ```

2.  Запустите все сервисы:
    ```bash
    docker-compose up -d --build
    ```
    Этот процесс может занять некоторое время при первом запуске, так как Docker будет скачивать образ модели `llama3`.

3.  После успешного запуска:
    -   **Frontend** будет доступен по адресу [http://localhost:3000](http://localhost:3000).
    -   **Backend API** будет доступен по адресу [http://localhost:8000](http://localhost:8000).
    -   **Ollama API** будет доступен по адресу [http://localhost:11434](http://localhost:11434).
